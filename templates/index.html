<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расчет уровня защищенности ИСПДн</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header class="hero">
        <div class="hero__content">
            <p class="eyebrow">Мастер-опрос</p>
            <h1>Расчет уровня защищенности ИСПДн</h1>
            <p class="lead">Ответьте на несколько вопросов, чтобы получить уровень защищенности и перечень мер</p>
        </div>
    </header>

    <main class="layout" id="pageLayout">
        <section class="panel bento" id="wizardPanel">
            <div class="panel__header">
                <div>
                    <p class="eyebrow">Шаги мастера</p>
                    <h2>Ответьте на вопросы</h2>
                </div>
                <div class="progress" role="progressbar" aria-label="Прогресс заполнения">
                    <div class="progress__bar" id="progressBar"></div>
                </div>
            </div>
            <div class="wizard" id="wizard">
                <div class="wizard__step active" data-step="1">
                    <div class="step__header">
                        <div class="step__badge">1</div>
                        <div>
                            <p class="eyebrow">Тип данных</p>
                            <h3>Какой тип данных обрабатывается в вашей ИСПДн?</h3>
                            <p class="muted">Выберите один вариант</p>
                        </div>
                    </div>
                    <div class="options options--grid" role="radiogroup" aria-label="Тип данных">
                        <label class="card card--option has-tooltip" data-tooltip="Персональные данные, касающиеся расовой, национальной принадлежности, политических взглядов, религиозных или философских убеждений, состояния здоровья, интимной жизни субъектов персональных данных.">
                            <input type="radio" name="dataType" value="special">
                            <div>
                                <p class="card__title">Специальные данные</p>
                            </div>
                        </label>
                        <label class="card card--option has-tooltip" data-tooltip="Сведения, которые характеризуют физиологические и биологические особенности человека, на основании которых можно установить его личность и которые используются оператором для установления личности субъекта персональных данных.">
                            <input type="radio" name="dataType" value="biometric">
                            <div>
                                <p class="card__title">Биометрические данные</p>
                            </div>
                        </label>
                        <label class="card card--option has-tooltip" data-tooltip="Персональные данные субъектов персональных данных, полученные только из общедоступных источников персональных данных, созданных в соответствии со статьей 8 Федерального закона &quot;О персональных данных&quot;.">
                            <input type="radio" name="dataType" value="public">
                            <div>
                                <p class="card__title">Общедоступные данные</p>
                            </div>
                        </label>
                        <label class="card card--option has-tooltip" data-tooltip="Все остальные данные, что не относятся к прошлым 3 группам.">
                            <input type="radio" name="dataType" value="other">
                            <div>
                                <p class="card__title">Иные данные</p>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="wizard__step" data-step="2">
                    <div class="step__header">
                        <div class="step__badge">2</div>
                        <div>
                            <p class="eyebrow">Угрозы</p>
                            <h3>Какой тип угроз актуален для вашей системы?</h3>
                            <p class="muted">Выберите один вариант</p>
                        </div>
                    </div>
                    <div class="options" role="radiogroup" aria-label="Типы угроз">
                        <label class="chip has-tooltip" data-tooltip="Есть актуальные угрозы для ИСПДн, связанные с наличием недокументированных (недекларированных) возможностей в системном программном обеспечении, используемом в информационной системе.">
                            <input type="radio" name="threatType" value="1">Угрозы 1 типа
                        </label>
                        <label class="chip has-tooltip" data-tooltip="Есть актуальные угрозы для ИСПДн, связанные с наличием недокументированных (недекларированных) возможностей в прикладном программном обеспечении, используемом в информационной системе.">
                            <input type="radio" name="threatType" value="2">Угрозы 2 типа
                        </label>
                        <label class="chip has-tooltip" data-tooltip="Есть актуальные угрозы для ИСПДн, не связанные с наличием недокументированных (недекларированных) возможностей в системном и прикладном программном обеспечении, используемом в информационной системе.">
                            <input type="radio" name="threatType" value="3">Угрозы 3 типа
                        </label>
                        <label class="chip">
                            <input type="radio" name="threatType" value="unknown">Тип угроз неизвестен
                        </label>
                    </div>
                </div>

                <div class="wizard__step" data-step="3">
                    <div class="step__header">
                        <div class="step__badge">3</div>
                        <div>
                            <p class="eyebrow">Субъекты</p>
                            <h3>Обрабатываете ли вы данные только сотрудников?</h3>
                            <p class="muted">Один вариант ответа</p>
                        </div>
                    </div>
                    <div class="options" role="radiogroup" aria-label="Только сотрудники?">
                        <label class="card card--option">
                            <input type="radio" name="employeesOnly" value="yes">
                            <div>
                                <p class="card__title">Да</p>
                                <p class="card__desc">В ИСПДн только данные сотрудников.</p>
                            </div>
                        </label>
                        <label class="card card--option">
                            <input type="radio" name="employeesOnly" value="no">
                            <div>
                                <p class="card__title">Нет</p>
                                <p class="card__desc">Есть данные сторонних субъектов.</p>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="wizard__step" data-step="4" id="nonEmployeeStep">
                    <div class="step__header">
                        <div class="step__badge">4</div>
                        <div>
                            <p class="eyebrow">Объем данных</p>
                            <h3>Сколько субъектов (не сотрудников) в ИСПДн?</h3>
                            <p class="muted">Выберите диапазон независимо от ответа выше</p>
                        </div>
                    </div>
                    <div class="options" role="radiogroup" aria-label="Количество субъектов">
                        <label class="card card--option">
                            <input type="radio" name="nonEmployeeScope" value="under_100k">
                            <div>
                                <p class="card__title">До 100 000</p>
                                <p class="card__desc">Небольшой объем сторонних субъектов.</p>
                            </div>
                        </label>
                        <label class="card card--option">
                            <input type="radio" name="nonEmployeeScope" value="over_100k">
                            <div>
                                <p class="card__title">Более 100 000</p>
                                <p class="card__desc">Крупный объем сторонних субъектов.</p>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="wizard__footer">
                    <p class="muted" id="formMessage"></p>
                    <button class="btn" id="nextBtn" type="button">Далее</button>
                    <button class="btn btn--ghost" id="prevBtn" type="button">Назад</button>
                </div>
            </div>
        </section>

        <section class="panel panel--result" id="resultPanel" hidden>
            <div class="panel__header">
                <div>
                    <p class="eyebrow">Результат</p>
                    <h2>Уровень и меры</h2>
                </div>
                <div class="badge" id="levelBadge">—</div>
            </div>
            <div class="result" id="resultBox">
                <p class="muted">После прохождения опроса здесь появится отчет.</p>
            </div>
            <div class="result-actions" id="resultActions" hidden>
                <button class="btn" id="restartBtn" type="button">Рассчитать заново</button>
                <button class="btn btn--ghost" id="saveBtn" type="button">Сохранить отчёт</button>
            </div>
            <div class="templates-block" id="templatesBlock">
                <div class="templates-block__header">
                    <div>
                        <p class="eyebrow">Документы</p>
                        <h4>Перечень необходимых документов</h4>
                    </div>
                </div>
                <div class="template-card">
                    <div>
                        <p class="template-card__title">АКТ определения уровня защищенности персональных данных информационной системы персональных данных</p>
                        <p class="template-card__desc">Скачать и заполнить официальный акт по результатам расчёта</p>
                    </div>
                    <button class="btn btn--ghost" id="downloadActBtn" type="button">Скачать шаблон</button>
                </div>
            </div>
        </section>
    </main>

    <div class="modal" id="actModal" aria-hidden="true">
        <div class="modal__backdrop"></div>
        <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="actModalTitle">
            <div class="modal__header">
                <div>
                    <p class="eyebrow">Данные для акта</p>
                    <h3 id="actModalTitle">Заполните сведения</h3>
                </div>
                <button class="modal__close" id="actModalClose" type="button" aria-label="Закрыть">×</button>
            </div>
            <form class="modal__body" id="actForm">
                <label class="field">
                    <span class="field__label">Наименование организации</span>
                    <input class="field__input" type="text" id="orgInput" name="organization" required>
                </label>
                <label class="field">
                    <span class="field__label">Должность руководителя организации</span>
                    <input class="field__input" type="text" id="headInput" name="headPosition" required>
                </label>
                <label class="field">
                    <span class="field__label">Наименование ИСПДн</span>
                    <input class="field__input" type="text" id="systemInput" name="systemName" required>
                </label>
                <div class="modal__actions">
                    <button class="btn btn--ghost" type="button" id="actModalCancel">Отмена</button>
                    <button class="btn" type="submit" id="actModalSubmit">Скачать акт</button>
                </div>
            <p class="muted" id="actModalMessage"></p>
            </form>
        </div>
    </div>

    <div class="modal" id="reportModal" aria-hidden="true">
        <div class="modal__backdrop"></div>
        <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="reportModalTitle">
            <div class="modal__header">
                <div>
                    <p class="eyebrow">Сохранить отчёт</p>
                    <h3 id="reportModalTitle">Название отчёта</h3>
                </div>
                <button class="modal__close" id="reportModalClose" type="button" aria-label="Закрыть">×</button>
            </div>
            <form class="modal__body" id="reportForm">
                <label class="field">
                    <span class="field__label">Наименование отчёта</span>
                    <input class="field__input" type="text" id="reportNameInput" name="reportName" required value="Отчет ИСПДн">
                </label>
                <div class="modal__actions">
                    <button class="btn btn--ghost" type="button" id="reportModalCancel">Отмена</button>
                    <button class="btn" type="submit" id="reportModalSubmit">Скачать</button>
                </div>
                <p class="muted" id="reportModalMessage"></p>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}" defer></script>
</body>
</html>
